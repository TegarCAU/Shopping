<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sale Items - Clothing</title>
    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="css/components.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="header-top">
        Gratis ongkir sampai Rp 1.600.000 | 30-hari kembalian
      </div>
      <div class="header-main">
        <div class="container">
          <div class="header-content">
            <button class="mobile-menu-btn" id="mobileMenuBtn">
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <line x1="4" x2="20" y1="12" y2="12"></line>
                <line x1="4" x2="20" y1="6" y2="6"></line>
                <line x1="4" x2="20" y1="18" y2="18"></line>
              </svg>
            </button>

            <div class="logo">
              <a href="index.html">Clothing</a>
            </div>

            <nav class="nav-desktop">
              <a href="women.html" class="nav-link">Women</a>
              <a href="men.html" class="nav-link">Men</a>
              <a href="accessories.html" class="nav-link">Accessories</a>
              <a
                href="sale.html"
                class="nav-link"
                style="
                  color: var(--amber-900);
                  border-bottom: 2px solid var(--amber-900);
                "
                >Sale</a
              >
              <a href="about.html" class="nav-link">About</a>
            </nav>

            <div class="header-actions">
              <button class="icon-btn search-btn">
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <circle cx="11" cy="11" r="8"></circle>
                  <path d="m21 21-4.3-4.3"></path>
                </svg>
              </button>
              <button class="icon-btn" id="wishlistBtn">
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path
                    d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
                  ></path>
                </svg>
              </button>
              <button class="icon-btn" id="userBtn">
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                  <circle cx="12" cy="7" r="4"></circle>
                </svg>
              </button>
              <button class="icon-btn cart-btn" id="cartBtn">
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path
                    d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"
                  ></path>
                  <line x1="3" x2="21" y1="6" y2="6"></line>
                  <path d="M16 10a4 4 0 0 1-8 0"></path>
                </svg>
                <span class="cart-count" id="cartCount">0</span>
              </button>
            </div>
          </div>

          <nav class="nav-mobile" id="mobileNav">
            <a href="women.html" class="nav-link">Women</a>
            <a href="men.html" class="nav-link">Men</a>
            <a href="accessories.html" class="nav-link">Accessories</a>
            <a href="sale.html" class="nav-link">Sale</a>
            <a href="about.html" class="nav-link">About</a>
          </nav>
        </div>
      </div>
    </header>

    <!-- Sale Banner -->
    <section
      style="
        background: linear-gradient(to right, var(--red-500), var(--red-600));
        padding: 3rem 0;
        text-align: center;
        color: white;
      "
    >
      <div class="container">
        <div
          style="
            display: inline-block;
            background-color: rgba(255, 255, 255, 0.2);
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            margin-bottom: 1rem;
            font-size: 0.875rem;
            font-weight: 500;
          "
        >
          Limited Time Offer
        </div>
        <h1 style="font-size: 3rem; font-weight: 700; margin-bottom: 1rem">
          Up to 50% Off Sale
        </h1>
        <p style="font-size: 1.25rem; margin-bottom: 2rem; opacity: 0.9">
          Jangan lewatkan penghematan luar biasa pada koleksi premium kami. Waktu terbatas!
        </p>
        <div
          style="
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 2rem;
            margin: 2rem 0;
          "
          id="countdownContainer"
        >
          <div
            style="
              display: flex;
              flex-direction: column;
              align-items: center;
              gap: 0.5rem;
              background: var(--amber-50);
              padding: 1.5rem;
              border-radius: 1rem;
              box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
              transition: transform 0.3s ease;
            "
            class="countdown-item"
          >
            <span
              style="
                font-size: 3rem;
                font-weight: 700;
                color: var(--amber-900);
                letter-spacing: -0.5px;
              "
              id="days"
            >
              00
            </span>
            <span
              style="
                font-size: 1rem;
                color: var(--amber-700);
                text-transform: uppercase;
                letter-spacing: 2px;
              "
            >
              Days
            </span>
          </div>
          <div
            style="
              display: flex;
              flex-direction: column;
              align-items: center;
              gap: 0.5rem;
              background: var(--amber-50);
              padding: 1.5rem;
              border-radius: 1rem;
              box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
              transition: transform 0.3s ease;
            "
            class="countdown-item"
          >
            <span
              style="
                font-size: 3rem;
                font-weight: 700;
                color: var(--amber-900);
                letter-spacing: -0.5px;
              "
              id="hours"
            >
              00
            </span>
            <span
              style="
                font-size: 1rem;
                color: var(--amber-700);
                text-transform: uppercase;
                letter-spacing: 2px;
              "
            >
              Hours
            </span>
          </div>
          <div
            style="
              display: flex;
              flex-direction: column;
              align-items: center;
              gap: 0.5rem;
              background: var(--amber-50);
              padding: 1.5rem;
              border-radius: 1rem;
              box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
              transition: transform 0.3s ease;
            "
            class="countdown-item"
          >
            <span
              style="
                font-size: 3rem;
                font-weight: 700;
                color: var(--amber-900);
                letter-spacing: -0.5px;
              "
              id="minutes"
            >
              00
            </span>
            <span
              style="
                font-size: 1rem;
                color: var(--amber-700);
                text-transform: uppercase;
                letter-spacing: 2px;
              "
            >
              Minutes
            </span>
          </div>
          <div
            style="
              display: flex;
              flex-direction: column;
              align-items: center;
              gap: 0.5rem;
              background: var(--amber-50);
              padding: 1.5rem;
              border-radius: 1rem;
              box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
              transition: transform 0.3s ease;
            "
            class="countdown-item"
          >
            <span
              style="
                font-size: 3rem;
                font-weight: 700;
                color: var(--amber-900);
                letter-spacing: -0.5px;
              "
              id="seconds"
            >
              00
            </span>
            <span
              style="
                font-size: 1rem;
                color: var(--amber-700);
                text-transform: uppercase;
                letter-spacing: 2px;
              "
            >
              Seconds
            </span>
          </div>
        </div>
      </div>
    </section>

    <!-- Page Content -->
    <div class="container" style="padding: 2rem">
      <!-- Breadcrumb -->
      <div class="breadcrumb">
        <a href="index.html">Home</a>
        <span class="breadcrumb-separator">/</span>
        <span style="color: var(--amber-900)">Sale Items</span>
      </div>

      <!-- Page Header -->
      <div style="margin-bottom: 2rem">
        <h2
          style="
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--amber-900);
            margin-bottom: 1rem;
          "
        >
          Sale Items
        </h2>
        <p style="color: var(--amber-700); font-size: 1.125rem">
          Temukan penawaran menarik untuk koleksi busana premium kami. Stok terbatas!
        </p>
      </div>

      <div style="display: grid; grid-template-columns: 250px 1fr; gap: 2rem">
        <!-- Filters Sidebar -->
        <div class="filters-sidebar">
          <div
            style="
              background-color: var(--amber-50);
              padding: 1.5rem;
              border-radius: 0.5rem;
              position: sticky;
              top: 6rem;
            "
          >
            <h3
              style="
                font-size: 1.125rem;
                font-weight: 600;
                color: var(--amber-900);
                margin-bottom: 1.5rem;
              "
            >
              Filters
            </h3>

            <!-- Category -->
            <div style="margin-bottom: 2rem">
              <h4
                style="
                  font-weight: 600;
                  color: var(--amber-900);
                  margin-bottom: 1rem;
                "
              >
                Category
              </h4>
              <div style="display: flex; flex-direction: column; gap: 0.75rem">
                <label
                  style="
                    display: flex;
                    align-items: center;
                    gap: 0.5rem;
                    color: var(--amber-800);
                    cursor: pointer;
                  "
                >
                  <input type="checkbox" class="checkbox" value="women" />
                  Women's
                </label>
                <label
                  style="
                    display: flex;
                    align-items: center;
                    gap: 0.5rem;
                    color: var(--amber-800);
                    cursor: pointer;
                  "
                >
                  <input type="checkbox" class="checkbox" value="men" />
                  Men's
                </label>
                <label
                  style="
                    display: flex;
                    align-items: center;
                    gap: 0.5rem;
                    color: var(--amber-800);
                    cursor: pointer;
                  "
                >
                  <input type="checkbox" class="checkbox" value="accessories" />
                  Accessories
                </label>
              </div>
            </div>

            <!-- Discount -->
            <div style="margin-bottom: 2rem">
              <h4
                style="
                  font-weight: 600;
                  color: var(--amber-900);
                  margin-bottom: 1rem;
                "
              >
                Discount
              </h4>
              <div style="display: flex; flex-direction: column; gap: 0.75rem">
                <label
                  style="
                    display: flex;
                    align-items: center;
                    gap: 0.5rem;
                    color: var(--amber-800);
                    cursor: pointer;
                  "
                >
                  <input type="checkbox" class="checkbox" value="20" />
                  20% & above
                </label>
                <label
                  style="
                    display: flex;
                    align-items: center;
                    gap: 0.5rem;
                    color: var(--amber-800);
                    cursor: pointer;
                  "
                >
                  <input type="checkbox" class="checkbox" value="30" />
                  30% & above
                </label>
                <label
                  style="
                    display: flex;
                    align-items: center;
                    gap: 0.5rem;
                    color: var(--amber-800);
                    cursor: pointer;
                  "
                >
                  <input type="checkbox" class="checkbox" value="40" />
                  40% & above
                </label>
                <label
                  style="
                    display: flex;
                    align-items: center;
                    gap: 0.5rem;
                    color: var(--amber-800);
                    cursor: pointer;
                  "
                >
                  <input type="checkbox" class="checkbox" value="50" />
                  50% & above
                </label>
              </div>
            </div>

            <!-- Clear Filters -->
            <button
              class="btn btn-outline"
              style="width: 100%"
              onclick="clearFilters()"
            >
              Clear All Filters
            </button>
          </div>
        </div>

        <!-- Products Section -->
        <div>
          <!-- Sale Stats -->
          <div
            style="
              display: grid;
              grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
              gap: 1rem;
              margin-bottom: 2rem;
            "
          >
            <div
              style="
                background-color: var(--red-50);
                padding: 1.5rem;
                border-radius: 0.5rem;
                text-align: center;
              "
            >
              <div
                style="font-size: 2rem; font-weight: 700; color: var(--red-600)"
              >
                30-50%
              </div>
              <div style="color: var(--red-700)">Average Savings</div>
            </div>
            <div
              style="
                background-color: var(--amber-50);
                padding: 1.5rem;
                border-radius: 0.5rem;
                text-align: center;
              "
            >
              <div
                style="
                  font-size: 2rem;
                  font-weight: 700;
                  color: var(--amber-600);
                "
                id="saleCount"
              >
                0
              </div>
              <div style="color: var(--amber-700)">Items on Sale</div>
            </div>
            <div
              style="
                background-color: var(--green-50);
                padding: 1.5rem;
                border-radius: 0.5rem;
                text-align: center;
              "
            >
              <div
                style="
                  font-size: 2rem;
                  font-weight: 700;
                  color: var(--green-600);
                "
              >
                Free
              </div>
              <div style="color: var(--green-700)">Shipping Over $100</div>
            </div>
          </div>

          <!-- Products Grid -->
          <div class="products-grid" id="productsContainer">
            <!-- Products will be loaded by JavaScript -->
          </div>
        </div>
      </div>
    </div>

    <!-- User Modal -->
    <div class="modal" id="userModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Account</h3>
          <button class="modal-close" id="closeUserModal">&times;</button>
        </div>
        <div class="modal-body">
          <div class="tabs">
            <button class="tab-btn active" id="loginTab">Login</button>
            <button class="tab-btn" id="signupTab">Sign Up</button>
          </div>
          <div id="loginContent">
            <form id="loginForm">
              <div class="form-group">
                <label for="loginEmail">Email</label>
                <input type="email" id="loginEmail" required>
              </div>
              <div class="form-group">
                <label for="loginPassword">Password</label>
                <input type="password" id="loginPassword" required>
              </div>
              <button type="submit" class="btn btn-primary">Login</button>
            </form>
          </div>
          <div id="signupContent" class="hidden">
            <form id="signupForm">
              <div class="form-group">
                <label for="signupEmail">Email</label>
                <input type="email" id="signupEmail" required>
              </div>
              <div class="form-group">
                <label for="signupPassword">Password</label>
                <input type="password" id="signupPassword" required>
              </div>
              <div class="form-group">
                <label for="confirmPassword">Confirm Password</label>
                <input type="password" id="confirmPassword" required>
              </div>
              <button type="submit" class="btn btn-primary">Sign Up</button>
            </form>
          </div>
        </div>
      </div>
    </div>


    <!-- Wishlist Modal -->
    <div class="modal" id="wishlistModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>My Wishlist</h3>
          <button class="modal-close" id="closeWishlistModal">&times;</button>
        </div>
        <div class="modal-body" id="wishlistItemsContainer">
          <!-- Wishlist items will be dynamically inserted here -->
          <p class="empty-wishlist-message" style="text-align: center; padding: 20px; display: none;">Your wishlist is currently empty.</p>
        </div>
        <!-- Optional footer for actions like "Clear All" -->
        <!--
        <div class="modal-footer">
            <button class="btn btn-danger" id="clearWishlistBtn">Clear Wishlist</button>
        </div>
        -->
      </div>
    </div>

    <!-- Search Modal -->
    <div class="modal" id="searchModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Search Products</h3>
          <button class="modal-close" id="closeSearchModal">&times;</button>
        </div>
        <div class="modal-body">
          <input type="text" id="searchInput" class="search-input-modal" placeholder="Search for products...">
          <div id="searchResultsContainer" class="search-results-container"></div>
        </div>
      </div>
    </div>

    <!-- Cart Modal -->
    <div class="modal" id="cartModal">
      <div class="modal-content">
        <div class="modal-header">
          <h3>Shopping Cart</h3>
          <button class="modal-close" id="closeCart">&times;</button>
        </div>
        <div class="modal-body" id="cartItems"></div>
        <div class="modal-footer">
          <div class="cart-total" id="cartTotal">Total: $0.00</div>
          <button class="btn btn-primary">Checkout</button>
        </div>
      </div>
    </div>

    <script src="js/products.js"></script>
    <script src="js/cart.js"></script>
    <script src="js/main.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        loadSaleProducts();
        initFilters();
        updateSaleCount();
      });

      function loadSaleProducts() {
        const container = document.getElementById("productsContainer");
        const saleProducts = getSaleProducts();
        container.innerHTML = saleProducts
          .map((product) => createProductCard(product))
          .join("");
      }

      function updateSaleCount() {
        const saleCount = document.getElementById("saleCount");
        const count = getSaleProducts().length;
        saleCount.textContent = count;
      }

      function initFilters() {
        document.querySelectorAll(".checkbox").forEach((checkbox) => {
          checkbox.addEventListener("change", filterProducts);
        });
      }

      function filterProducts() {
        const selectedCategories = Array.from(
          document.querySelectorAll(
            '.checkbox[value="women"], .checkbox[value="men"], .checkbox[value="accessories"]',
          ),
        )
          .filter((cb) => cb.checked)
          .map((cb) => cb.value);

        const selectedDiscounts = Array.from(
          document.querySelectorAll(
            '.checkbox[value="20"], .checkbox[value="30"], .checkbox[value="40"], .checkbox[value="50"]',
          ),
        )
          .filter((cb) => cb.checked)
          .map((cb) => parseInt(cb.value));

        let filtered = getSaleProducts();

        if (selectedCategories.length > 0) {
          filtered = filtered.filter((product) =>
            selectedCategories.includes(product.category),
          );
        }

        if (selectedDiscounts.length > 0) {
          filtered = filtered.filter((product) => {
            const discount = calculateDiscount(product);
            return selectedDiscounts.some(
              (minDiscount) => discount >= minDiscount,
            );
          });
        }

        const container = document.getElementById("productsContainer");
        container.innerHTML = filtered
          .map((product) => createProductCard(product))
          .join("");
      }

      function clearFilters() {
        document
          .querySelectorAll(".checkbox")
          .forEach((cb) => (cb.checked = false));
        loadSaleProducts();
      }

      // Countdown timer
      function updateCountdown() {
        // Set target date to 23 days from now at 14:35:42
        const targetDate = new Date();
        targetDate.setDate(targetDate.getDate() + 23);
        targetDate.setHours(14, 35, 42, 0);

        const now = new Date();
        const difference = targetDate - now;

        if (difference > 0) {
          // Calculate remaining time
          const days = Math.floor(difference / (1000 * 60 * 60 * 24));
          const hours = Math.floor((difference % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
          const minutes = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
          const seconds = Math.floor((difference % (1000 * 60)) / 1000);

          // Update the numbers directly
          document.getElementById('days').textContent = days.toString().padStart(2, '0');
          document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
          document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
          document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
        } else {
          // When countdown reaches 0
          document.getElementById('countdownContainer').innerHTML = `
            <div style="
              display: flex;
              flex-direction: column;
              align-items: center;
              gap: 1rem;
              color: var(--amber-900);
              font-size: 2rem;
            ">
              <span style="font-size: 3rem; font-weight: 700;">SALE ENDED</span>
              <span style="font-size: 1.5rem;">Thank you for shopping!</span>
            </div>
          `;
        }
      }

      setInterval(updateCountdown, 1000);
    </script>
  </body>
</html>
